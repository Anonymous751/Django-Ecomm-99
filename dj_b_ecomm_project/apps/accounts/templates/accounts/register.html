{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load widget_tweaks %}

{% block title %}{% trans "Register | ShopEase" %}{% endblock %}

{% block content %}
<div class="container my-5" style="max-width: 500px;">
  <h2 class="mb-4 text-center fw-bold" style="color: #0a415aff;">
    {% trans "Create Account" %}
  </h2>

  <form method="POST" enctype="multipart/form-data" class="shadow p-4 rounded-4 bg-white" novalidate>
    {% csrf_token %}

    <!-- ðŸ”´ Global form errors (like password mismatch, duplicate email, etc.) -->
    {% if form.non_field_errors %}
      <div class="alert alert-danger py-2 small rounded-3 mb-3">
        {% for error in form.non_field_errors %}
          <div>{{ error }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- ðŸ§¾ Field-wise form rendering -->
    {% for field in form %}
      <div class="mb-3">
        <label class="form-label fw-semibold">{{ field.label }}</label>
        {{ field|add_class:"form-control border-0 shadow-sm rounded-3 py-2" }}
        {% if field.errors %}
          <div class="text-danger small mt-1">
            {% for error in field.errors %}
              <div>{{ error }}</div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    {% endfor %}

    <button type="submit" 
      class="btn w-100 stylish-btn py-2 fw-semibold rounded-3">
      <i class="bi bi-person-plus me-2"></i> {% trans "Register" %}
    </button>

    <p class="mt-3 text-center mb-0">
      {% trans "Already have an account?" %}
      <a href="{% url 'accounts:login' %}" class="text-decoration-none fw-semibold text-primary">
        {% trans "Login" %}
      </a>
    </p>

  </form>
</div>
{% endblock %}

{% block extra_css %}
<style>
  .stylish-btn {
    background: linear-gradient(135deg, #4e54c8, #8f94fb);
    color: #fff;
    border: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(78, 84, 200, 0.3);
  }
  .stylish-btn:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #5f65d6, #a0a5ff);
    box-shadow: 0 6px 16px rgba(78, 84, 200, 0.4);
  }
  .form-control:focus {
    box-shadow: 0 0 0 0.2rem rgba(78, 84, 200, 0.25);
    border-color: #4e54c8;
  }
</style>
{% endblock %}
