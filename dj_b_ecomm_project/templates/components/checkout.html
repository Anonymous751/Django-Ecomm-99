{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5 mb-5">
  <div class="checkout-wrapper mx-auto" style="max-width: 900px;">
    <h2 class="mb-4 fw-bold text-center text-gradient">
      ðŸ›’ Checkout
    </h2>

    {% if cart_items %}
      <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
        <div class="table-responsive">
          <table class="table align-middle m-0">
            <thead class="table-gradient text-white">
              <tr>
                <th>Product</th>
                <th>Image</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>

            <tbody>
              {% for item in cart_items %}
                <tr class="cart-row">
                  <td class="fw-semibold">{{ item.product.name }}</td>
                  <td>
                    <img src="{{ item.product.images.url }}" width="60" class="rounded-3 shadow-sm" alt="{{ item.product.name }}">
                  </td>
                  <td>
                    <span class="badge bg-secondary px-3 py-2 fs-6 rounded-pill">{{ item.quantity }}</span>
                  </td>
                  <td>â‚¹{{ item.product.price }}</td>
                  <td class="fw-bold text-success">â‚¹{{ item.total_price|floatformat:2 }}</td>
                </tr>
              {% endfor %}
              <tr class="fw-bold border-top">
                <td colspan="4" class="text-end pe-3">Total:</td>
                <td class="fs-5 text-success">â‚¹{{ cart_total|floatformat:2 }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="p-4 text-end bg-light">
          <a href="{% url 'place_order' %}" class="btn btn-gradient btn-lg rounded-pill px-4 py-2">
            <i class="bi bi-check-circle me-2"></i>Place Order
          </a>
        </div>
      </div>
    {% else %}
      <div class="text-center mt-5">
        <p class="fs-4 text-muted">Your cart is empty!</p>
        <a href="/" class="btn btn-outline-primary rounded-pill px-4">
          <i class="bi bi-arrow-left"></i> Continue Shopping
        </a>
      </div>
    {% endif %}
  </div>
</div>

<!-- Custom Styles -->
<style>
  /* ðŸŽ¨ Gradient title text */
  .text-gradient {
    background: linear-gradient(135deg, #0a415aff, #0a415aff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* ðŸ’Ž Card styling */
  .card {
    background: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(10px);
  }

  /* ðŸŒˆ Gradient table header */
  .table-gradient {
    background: linear-gradient(135deg, #0a415aff, #0a415aff);
    border: none;
  }

  /* ðŸª¶ Smooth hover on rows */
  .cart-row {
    transition: all 0.2s ease-in-out;
  }

  .cart-row:hover {
    background-color: rgba(143, 148, 251, 0.1);
    transform: scale(1.01);
  }

  /* âœ¨ Gradient button */
  .btn-gradient {
    background: linear-gradient(135deg, #00b09b, #96c93d);
    color: #fff;
    border: none;
    transition: all 0.3s ease;
  }

  .btn-gradient:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #00a88d, #8cc63f);
    box-shadow: 0 4px 12px rgba(0, 176, 155, 0.3);
    color: #fff;
  }

  /* ðŸ§¾ Table style cleanup */
  table.table {
    border-collapse: separate;
    border-spacing: 0;
  }

  table td, table th {
    vertical-align: middle !important;
  }
</style>
{% endblock %}
